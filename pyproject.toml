[tool.poetry]
name="wp-site-extractor"
version="0.0.1"
description="Create a dataset from the WordPress API"
authors=["Freddy Heppell <frheppell1@sheffield.ac.uk>"]
packages=[
    { include = "extractor", from = "src"}
]

[tool.poetry.scripts]
wpextract = "extractor.cli:main"

# Workaround for https://github.com/python-poetry/poetry/issues/9293
[[tool.poetry.source]]
name = "pypi-public"
url = "https://pypi.org/simple/"

[tool.poetry.dependencies]
python = ">=3.9.0,<3.13"
beautifulsoup4 = ">=4.12.3"
langcodes = ">=3.4.0"
lxml = ">=5.2.2"
numpy = ">=1.26.4"
pandas = ">=2.2.2"
tqdm = ">=4.66.4"
requests = "^2.32.3"

[tool.poetry.group.dev.dependencies]
build = "==0.9.*,>=0.9.0"
pytest = "~8.2.2"
pytest-datadir = "~1.5.0"
pytest-mock = "~3.14.0"
ruff = "^0.5.0"

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.ruff.lint]
select = [
    "E4",
    "E7",
    "E9",
    "F",
    "D",
    "PD",
    "I",
    "PT",
    "B"
]

ignore = [
    "D100", # Missing docstring in public module
    "D104", # Missing docstring in public package
]

[tool.ruff.lint.per-file-ignores]
"**/tests/*" = [
    "D103", # Ignore method docstring errors in tests
    "PD901", # Allow `df` variable name in tests
]

[tool.ruff.lint.pydocstyle]
convention = "google"


[tool.pytest.ini_options]
pythonpath = "src tests"
addopts = [
    "--import-mode=importlib",
]